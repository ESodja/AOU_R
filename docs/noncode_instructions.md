---
layout: default
title: Non-coding Instructions
permalink: /how-to/non-coding
---
# Non-coding Instructions

## Quick Reference
> 1. Generate your dataset on the researcher workbench
> 2. Initialize your RStudio cloud environment
> 3. Download and upload the [zip file](R_files.zip) to the cloud environment (it will unzip automatically)
> 4. Copy the SQL code into 'Data_import.R'
> 5. Type `source('master.R')` into the RStudio console and press `Enter` or `Return`, and answer the questions that come up in the console
> 6. Look at the outputs and download your plots and statistical reports.

## Full Instructions
To use the automated analysis I've built for this group, follow the instructions below:
### 1. **Generate the desired dataset from the dataset builder on the AoU workbench**

Help can be found [here](https://support.researchallofus.org/hc/en-us/articles/4556645124244-Using-the-Concept-Set-Selector-and-Dataset-Builder-tools-to-build-your-dataset).

The data that can be automatically processed by this system needs to have a few specific elements and meet a few requirements to work. The guidelines can be found [here](./datareqs).

### 2. **Initialize your RStudio cloud environment**
    
[screenshots]
[details]

### 3. **Download and upload R_files.zip to RStudio**

Download the zipfile of R scripts from [here](/R_files.zip).

In RStudio, in the 'files' tab on the bottom right pane, click 'Upload', select 'Browse...', select the zip file, and click 'OK'. RStudio will automatically unzip the contents of the zipfile into your home directory.
[screenshots need pointers and stuff]

![In RStudio Files tab, select 'Upload'...](/images/RStudio_zipupload.png)

![...Browse to the zip file you downloaded...](/images/RStudio_zipupload2.png)
    
![...Select the zip file and click OK...](/images/RStudio_zipupload3.png)
    
![...The zip file automatically is unzipped.](/images/RStudio_zipupload4.png)

Alternatively, in RStudio, click File > New Project... > Version Control > Git (if a popup asks if you want to save your .RData file, say No). 
Enter the repository URL: 
```https://github.com/ESodja/AOU_R.git```
and name the project directory, e.g. `AOU_R`. Click 'Create Project'. This will copy all the pages from the github site where this website lives into your directory. The .R files you will be working with are in the R_Files folder.

![File > New Project](/images/RStudio_project1.png)

![Version control](/images/RStudio_project2.png)

![Git](/images/RStudio_project3.png)

![Repository URL and folder name](/images/RStudio_project4.png)

![Imported folder](/images/RStudio_project5.png)

### 4. **Copy and paste the SQL code generated by the dataset builder to Data_import.R**

In the dataset builder (after you've selected your data; see step 1), click on 'Analyze', select the 'R' button, click 'Copy Code' and wait until a message tells you it has been copied to the clipboard (this may take several seconds). Click 'Cancel' in the popup window, click on the RStudio icon in the purple bar on the right side of the window, and click 'Open RStudio'. 

Your Files tab should already have the R scripts from the zip file or the copy of the files from the GitHub site. Click on Data_import.R to open it in the script editor pane (look in the R_Files folder), then below the comments at the top of the file paste the SQL code copied from the dataset builder. Save this file and close it.

> Tip: If you change *anything* about the dataset definition in the dataset builder on the workbench, you will have to re-do this step!

![After dataset is built, click 'Analyze'](/images/SQL_analyze.png)

![Click the button next to R and then Copy Code](/images/SQL_analyze2.png)

![Wait for confirmation of the copy and click Cancel](/images/SQL_analyze3.png)

![Click on the RStudio icon](/images/SQL_analyze4.png)

![Click Open RStudio](/images/SQL_analyze5.png)

![Click Data_import.R](/images/SQL_analyze6.png)

![Paste the copied code into the script](/images/SQL_analyze7.png)

![Save and close the script](/images/SQL_analyze8.png)

[screenshots need arrows and pointers]

### 5. **Run the program**
    
Enter `source(‘master.R’)` in the RStudio console. After some time (some steps take a while, depending on how large your dataset is), the console will ask some questions about your data and the analysis you want to do, and then proceed based on your answers.

![Enter source('master.R') in the console](/images/program_run1.png)
![Answer questions to confirm detected data](/images/program_run2.png)
                          
[screenshots need pointers and arrows]
                          
The questions are outlined in the figure below:
[flowchart of questions]

> Tip: You can go through the questions in the flowchart above beforehand to know what to answer when it comes up.

### 6. **Look at the outputs**
You can find the generated outputs (plots, statistical results, etc.) in the RStudio “files” tab and select which files to download.
All of these have been designed to comply with the terms of service for registered-tier workbench access.

## An Example
Take a look at this [example of a non-coding analysis](/examples/bmi_noncoding).
